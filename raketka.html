<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ð Ð°ÐºÐµÑ‚ÐºÐ°</title>
    <style>
        :root {
            --tg-theme-bg-color: #181A1B;
            --tg-theme-text-color: #ffffff;
            --tg-theme-button-color: #2481cc;
            --tg-theme-button-text-color: #ffffff;
            --color-win: #43a047;
            --color-loss: #e53935;
        }
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        #app {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #raketka {
            font-size: 50px;
            transition: transform 0.1s linear;
        }
        #coefficient {
            font-size: 5em;
            font-weight: bold;
            margin: 20px 0;
            transition: color 0.3s;
        }
        #info { font-size: 1.2em; }
        #result {
            font-size: 2em;
            font-weight: bold;
            display: none; /* Ð¡ÐºÑ€Ñ‹Ñ‚Ð¾ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ */
        }
    </style>
</head>
<body>

<div id="app">
    <div id="raketka">ðŸš€</div>
    <div id="coefficient">x1.00</div>
    <div id="info">Ð’Ð°ÑˆÐ° Ñ†ÐµÐ»ÑŒ: x<span id="target-coef-display">...</span></div>
    <div id="result"></div>
</div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    const tg = window.Telegram.WebApp;
    tg.expand(); // Ð Ð°Ð·Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð½Ð° Ð²ÐµÑÑŒ ÑÐºÑ€Ð°Ð½

    // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹
    const raketkaEl = document.getElementById('raketka');
    const coefficientEl = document.getElementById('coefficient');
    const targetCoefDisplayEl = document.getElementById('target-coef-display');
    const resultEl = document.getElementById('result');

    // Ð§Ð¸Ñ‚Ð°ÐµÐ¼ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¸Ð· URL, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°Ð» Ð±Ð¾Ñ‚
    const urlParams = new URLSearchParams(window.location.search);
    const status = urlParams.get('status'); // 'win' Ð¸Ð»Ð¸ 'loss'
    const targetCoef = parseFloat(urlParams.get('target_coef'));
    const crashCoef = parseFloat(urlParams.get('crash_coef'));
    
    targetCoefDisplayEl.textContent = targetCoef.toFixed(2);
    
    let currentCoef = 1.00;
    const animationInterval = setInterval(() => {
        // Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸
        if ( (status === 'win' && currentCoef >= targetCoef) || (status === 'loss' && currentCoef >= crashCoef) ) {
            clearInterval(animationInterval);
            showResult();
            return;
        }
        
        currentCoef += 0.01;
        coefficientEl.textContent = `x${currentCoef.toFixed(2)}`;
        
        // ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð¿Ð¾Ð»ÐµÑ‚Ð°
        const progress = (currentCoef - 1.0) / 2.0; // ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ Ð¾Ñ‚ 0 Ð´Ð¾ 1 (Ð¿Ñ€Ð¸ Ð¼Ð°ÐºÑ. ÐºÐ¾ÑÑ„. 3.0)
        raketkaEl.style.transform = `translateY(-${progress * 200}px)`;

    }, 30); // Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸ (Ð² Ð¼Ð¸Ð»Ð»Ð¸ÑÐµÐºÑƒÐ½Ð´Ð°Ñ…)

    function showResult() {
        if (status === 'win') {
            coefficientEl.textContent = `x${targetCoef.toFixed(2)}`;
            coefficientEl.style.color = 'var(--color-win)';
            resultEl.textContent = 'ÐŸÐžÐ‘Ð•Ð”Ð!';
            resultEl.style.color = 'var(--color-win)';
        } else {
            coefficientEl.textContent = `x${crashCoef.toFixed(2)}`;
            raketkaEl.textContent = 'ðŸ’¥';
            coefficientEl.style.color = 'var(--color-loss)';
            resultEl.textContent = 'ÐŸÐ ÐžÐ˜Ð“Ð Ð«Ð¨';
            resultEl.style.color = 'var(--color-loss)';
        }
        
        resultEl.style.display = 'block';

        // Ð§ÐµÑ€ÐµÐ· 3 ÑÐµÐºÑƒÐ½Ð´Ñ‹ Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÐµÐ¼ Ð·Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¾ÐºÐ½Ð¾
        setTimeout(() => {
            tg.close();
        }, 3000);
    }
</script>

</body>
</html>